# 병행제어(concurrency control)

## 개념
- 동시에 여러개의 트랜잭션을 병행 수행할 때, 트랜잭션들이 DB의 일관성을 파괴하지 않고 트랜잭션 간의 상호작용을 제어하는것
- 병행성 : 트랜젝션을 동시에 인터리빙하게 실행되는것
- 인터리빙(interleaving) : 트랜잭션이 번갈아가며 조금씩 처리를 수행하는것

## 목적
- DB의 일관성유지
- DB의 공유도 최대화
- 시스템 활용도 최대화
- 응답시간 최소화
- 단위시간당 트랜잭션 처리 건수 최대화

## 필요성
트랜잭션 병행제어 없이 DB에 동시에 접근할 경우 문제점 발생
- 갱신분실(Lost update) : 같은 데이터를 공유하여 갱신 할 때 갱신 결과의 일부가 사라지는 현상
- 모순성(inconsistency) : 동시에 같은 데이터를 갱신할 때, 데이터의 상호불일치가 발생하는 현상
- 연쇄복귀(cascading rollback) : 트랜잭션 하나에 문제가 생겨 rollback되는 경우 다른 트랜잭션도 함께 rollback되는 현상

## 잠금(Lock)
하나의 트랜잭션이 사용중인 데이터를 다른 트랜잭션이 접근하지 못하게 하는것
데이터를 갱신할 때 순서, 잠금(lock)->실행(execute)->해제(unlock)
### 교착상태(Dead Lock)
데이터를 사용중인 트랜잭션이 잠궈놓은 자원을 사용하기 위해 다른 트랜잭션이 무한정 대기하는 현상
## 공유잠금(shared lock)
잠금걸린 데이터에 대해 읽기가능, 기록 불가능
## 배타잠금(exclusive lock)
잠금걸린 데이터에 대해 읽기, 기록 모두 불가능

## 종류
### 2단계 잠금규약(two phase lock protocol)
2단계
- 확장(growing) : 잠금만 수행가능(해제 불가)
- 축소(shrinking) : 해제만 수행가능(잠금 불가)
### 타임 스탬프(time stamp) 
시스템이 도착한 순서대로 타임 스탬프를 부여하여 순서대로 실행하도록 한다
교착상태가 발생하지 

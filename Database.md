# 병행제어(concurrency control)

## 개념
- 동시에 여러개의 트랜잭션을 병행 수행할 때, 트랜잭션들이 DB의 일관성을 파괴하지 않고 트랜잭션 간의 상호작용을 제어하는것
- 병행성 : 트랜젝션을 동시에 인터리빙하게 실행되는것
- 인터리빙(interleaving) : 트랜잭션이 번갈아가며 조금씩 처리를 수행하는것

## 목적
- DB의 일관성유지
- DB의 공유도 최대화
- 시스템 활용도 최대화
- 응답시간 최소화
- 단위시간당 트랜잭션 처리 건수 최대화

## 필요성
트랜잭션 병행제어 없이 DB에 동시에 접근할 경우 문제점 발생
- 갱신분실(Lost update) : 같은 데이터를 공유하여 갱신 할 때 갱신 결과의 일부가 사라지는 현상
- 모순성(inconsistency) : 동시에 같은 데이터를 갱신할 때, 데이터의 상호불일치가 발생하는 현상
- 연쇄복귀(cascading rollback) : 트랜잭션 하나에 문제가 생겨 rollback되는 경우 다른 트랜잭션도 함께 rollback되는 현상

## 잠금(Lock)
하나의 트랜잭션이 사용중인 데이터를 다른 트랜잭션이 접근하지 못하게 하는것
데이터를 갱신할 때 순서, 잠금(lock)->실행(execute)->해제(unlock)
### 교착상태(Dead Lock)
데이터를 사용중인 트랜잭션이 잠궈놓은 자원을 사용하기 위해 다른 트랜잭션이 무한정 대기하는 현상
## 공유잠금(shared lock)
잠금걸린 데이터에 대해 읽기가능, 기록 불가능
## 배타잠금(exclusive lock)
잠금걸린 데이터에 대해 읽기, 기록 모두 불가능

### 로킹 단위
동시성 제어에서 한꺼번에 로킹할수 있는 단위
- 로킹단위가 크면 로크수가 작아 관리하기 쉽지만 병행성수준이 낮아지고, 로킹단위가 작으면 로크수가 많아 관리하기 복잡하지만 병행성 수준은 높아진다
- 로킹단위가 작아지면 병행성과 오버헤드는 증가한다.

## 종류
### 2단계 잠금규약(two phase lock protocol)
2단계
- 확장(growing) : 잠금만 수행가능(해제 불가)
- 축소(shrinking) : 해제만 수행가능(잠금 불가)
### 타임 스탬프(time stamp) 
시스템이 도착한 순서대로 타임 스탬프를 부여하여 순서대로 실행하도록 한다
교착상태가 발생하지 
### 배타로그기법


# 스키마 
## 외부스키마
## 개념스키마
## 내부스키마


# 무결성
## 개체무결성
## 참조무결성
## 도메인무결성
## 키 무결성


# 정규화 과정
- 데이터베이스의 논리적 설계 단계에서 수행
비정규 릴레이션 ―(도메인 원자값)→ INF ―(부분적 함수 종속 제거)→ 2NF ―(이행적 함수 종속 제거)→ 3NF ―(결정자이면서 후보키가 아닌것 제거)→ BCNF ―(다치 종속제거)→ 4NF ―(조인 속성이용)→ 5NF


# 뷰
장점
1. 논리적 독립성을 제공합니다.
2. 데이터 접근 제어로 보안 가능합니다.
3. 사용자의 데이터 관리를 간단하게 합니다.
4. 하나의 테이블로 여러개의 상이한 뷰를 정의할수 있습니다.

단점
1. 독자적인 인덱스를 가질수 없습니다.
2. 정의를 변경할수 없습니다.
3. 삽입, 삭제, 갱신 연산에 많은 제약이 따릅니다.

# 시스템 카탈로그
- DBMS가 생성하고 유지하는 데이터베이스 내의 테이블들의 집합체
- 시스템 테이블로 구성되어있어 일반 이용자들도 SQL을 이용하여 내용 검색 가능
- 각 테이블은 DBMS에서 지원하는 개체들에 관한 정보를 포함함
- 사용자가 SQL문을 실행시켜 내용에 변화를 주면 시스템이 자동으로 갱신됨.

# 순회
전위, 중위, 후위

# 데이터베이스 설계
데이터베이스 설계단계: 요구분석> 개념적 설계> 논리적 설계> 물리적 설계

- 요구 조건 분석 : 요구조건 분석은 데이터베이스를 사용할 사람들로부터 필요한 용도를 파악하는 것이다.
- 개념적 설계 : 개념적 설계란 정보의 구조를 얻기 위항 현실 세계의 무한성과 계속성을 이해하고, 다른 사람과 통신하기 위하여 현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정이다.(E-R 다이어그램 작성)
- 논리적 설계 : 논리적 설계 단계에서는 현실 세계에서 발생하는 자료를 컴퓨터가 이해하고 처리할 수 있는 물리적 저장장치에 저장할 수 있도록 변환하기 위해 특정 DBMS가 지원하는 논리적 자료 구조로 변환시키는 과정이다.(테이블 설계)
- 물리적 설계 : 논리적 설계 단계에서 논리적 구조로 표현된 데이터를 디스크 등의 물리적 저장장치에 저장할 수 있는 물리적 구조의 데이터로 변환하는 과정이다.(저장 레코드 양식 설계, 레코드 집중의 분석 및 설계, 접근 경로 설계)


# SQL
DDL : CREATE, ALTER, DROP, RENAME, TRUNCATE
DROP TABLE 테이블명 [CASCADE | RESTRICT]
CASCADE : 참조하는 테이블까지 연쇄적으로 제거
RESTRICT : 다른 테이블이 삭제할 테이블 참조 중이면 제거 안함
DML : SELECT, INSERT, UPDATE, DELETE
갱신문(Update~set)
삭제문(Delete From)
삽입문(Insert Into)
DCL : GRANT, REVOKE
SELECT : 데이터 개체에 대해 검색을 할 수 있는 권한
INSERT : 데이터 개체에 새로운 데이터를 삽입할 수 있는 권한
UPDATE : 데이터 개체의 데이터를 갱신할 수 있는 권한
DELETE : 데이터 개체에서 데이터를 삭제할 수 있는 권한
TCL : COMMIT, ROLLBACK, SAVEPOINT
## DDL 
## DCL
## DML


# 해싱
Collision:동일한 홈 주소로 인하여 충돌이 일어나는 현상
synonym:동일한 홈 주소로 인하여 충돌이 일어난 레코드들의 집합
Overflow: 해당 버킷에 더 이상의 레코드 키 값을 기억시킬 수 없어서 넘쳐나는 현상
Bucket: 하나의 주소를 가지면서 한 개 이상의 레코드를 저장할 수 있는 공간

## 해싱 오버플로우 처리 기법
- 개방주소법 : =선형 방법. collision 발생시 순차적으로 그다음 빈 버킷을 찾아 저장함
- 폐쇄주소법:  overflow된 레코드들을 별도의 overflow영역에 저장하고 chain(pointer)으로 홈 버킷에 연결하는 방법으로서, 헤시표 내의 빈자리에 보관하는 direct chaining, 헤시표와는 별도의 기억공간에 보관하는 indirect chaining 이 있음
- 재해싱: collision 발생시 새로운 해싱 함수로 새로운 홈주소를 구함

## 해싱함수
- 중간 제곱 방법:레코드 키 값(K)을 제곱한 후 그 중간 부분의 값을 홈 주소로 삼는 방식이다.
- 제산 방법:레코드 키(K)를 해시표(Hash Table)의 크기보다 큰 수 중에서 가장 작은 소수(Prime, Q)로 나눈 나머지를 홈 주소로 삼는 방식, 즉 h(K)=Kmod Q이다
- 폴딩 방법:레코드 키 값(K)을 여러 부분으로 나눈 후 각 부분의 값을 더하거나 XOR한 값을 홈 주소로 삼는 방식이다.
- 기수변환법:키 숫자의 진수를 다른 진수로 변환시켜 주소 크기를 초과한 높은 자릿수는 절단하고 이를 다시 주소 범위에 맞게 조정하는 방법이다.

# 관계대수연산
셀렉트(SELECT), 프로젝트(PROJECT), 조인(JOIN), 디비전(DIVISION)

Transaction (트랜잭션) -> 논리적 기능을 수행하는 하나의 "작업 단위"


# 정렬
## 버블정렬

# 색인 순차 파일 indexed sequential file
기본영역prime, 색인 영역index, 오버플로 영역overflow으로 구성
색인 순차 파일의 장점
- 순차 처리와 임의 처리가 모두 가능하다.
- 효율적인 검색이 가능하고 삭제, 삽입, 갱신이 용이하다.

색인 순차 파일의 단점
- 색인 영역이나 오버플로 영역을 설정해야 하므로 기억공간이 필요하다.
- 색인을 이용하여 참조하기 때문에 접근 시간이 직접 파일보다 느리다.

# 관계형 데이터 베이스의 키Key
1. 후보키 : 후보키(candidate key)는 유일성과 최소성을 만족하는 속성 또는 속성들의 집합이다. 최소성(minimality)은 키를 구성하고 있는 여러 속성 중에서 하나라도 없으면 투플을 유일하게 구별할 수 없는, 꼭 필요한 최소한의 속성들로만 키를 구성하는 특성이다. 그러므로 하나의 속성으로 구성된 키는 당연히 최소성을 만족한다.  수퍼키 중에서 최소성을 만족하는 것이 후보키가 된다.
2. 대체키 : 대체키(alternate key)는 기본키로 선택되지 못한 후보키들이다.
3. 슈퍼키 : 수퍼키(super key)는 유일성의 특성을 만족하는 속성 또는 속성들의 집합이다.
4. 외래키 : 외래키(foreign key)는 어떤 릴레이션에 소속된 속성 또는 속성 집합이 다른 릴레이션의 기본키가 되는 키다.

# 관계대수
관계형 데이터베이스에서 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적인 언어이다.
# 관계해석
비절차적 언어는 관계해석

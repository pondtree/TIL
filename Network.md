# OSI 7 계층
7. 응용계층 appication layer - HTTP
6. 표현계층 presentation layer
5. 세션계층 session layer
4. 전송계층 transport layer - TCP
3. 네트워크 계층 network layer - IP
2. 데이터링크 계층 data link layer
1. 물리 계층 physical layer

# 3-way handshaking
연결설정
## 과정
초기 클라이언트 상태는 CLOSED상태, 서버의 열려있는 포트의 상태는 LISTEN상태
먼저 클라이언트가 서버에게 SYN신호를 보내면 서버에서는 SYN_RCV상태로 변경됨
다시 서버는 클라이언트에게 SYN에 대한 응답으로 ACK를 보냄. 이때 클라이언트의 포트도 열어달라는 요청으로 SYN를 같이 보냄
ACK와 SYN을 받은 클라이언트는 ESTABLISHED상태가 되면서 클라이언트와 서버간 연결

# 4-way handshaking
연결해제
## 과정
클라이언트가 종료하겠다는 신호인 FIN을 서버에 보내고 FIN_WAIT_1 상태로 변경
FIN을 받은 서버는 CLOSE_WAIT상태로 변경되고 응답으로 ACK를 보냄. 이때 서버는 남은 데이터를 모두 전송하고 연결을 종료한다는 신호로 FIN을 클라이언트에 보내며, LAST_ACK상태로 변경
FIN을 받은 클라이언트는 TIME_WAIT 상태로 변경되고 응답으로 ACK를 보냄. 자신은 일정시간이 지난후 CLOSED상태로 변경
마지막으로 응답신호를 받은 서버는 CLOSED상태로 변경되면서 포트를 닫음
## 서버가 마지막에 FIN을 보내는 이유
서버가 아직 클라이언트에 보낼 데이터가 남아있는 경우 데이터를 전송하지 못한 채 클라이언트가 포트를 막아버리게 되므로 서버 또한 준비가 되었다는 의미로 FIN을 보냄
## 클라이언트가 마지막에 ACK를 보내는 이유
서버가 보낸 FIN 신호를 클라이언트가 받지 못할 경우 클라이언트는 FIN_WAIT_2 상태로 종료되지 못한 채 계속 기다리게 될것임. 하지만 서버는 이미 포트를 닫고 더이상 응답을 하지 않는 상태이기 때문에 클라이언트는 불필요한 자원을 소모하게됨

# 로드밸런싱(Load Balancing)
가상 ip를 통하여 하나의 서비스를 여러대의 서버가 분산 처리하는 매커니즘.
대표적으로 하나의 서버에 발생하는 트래픽이 많은 경우 서버의 부하량과 속도 저하를 해소하거나 하나의 서버에서 장애가 발생하더라도 서비스가 중단되지 않고 지속하기 위해 사용됨
## 분산처리
## 분산처리 기법
### round robin
### least connection
### weighted least connections
### response time
### hask

# 도메인
컴퓨터간 통신을 하기 위해 고유숫자인 ip를 통해 통신을 하게 되는데 숫자로만 이루어진 ip는 사람들이 이해하거나 외우기 어려우므로 편하게 쓰기 위해 ip별로 고유 이름을 부여한것
### ip address 와 mac address
ip address는 인터넷 네트워크 상의 고유 주소이고 라우팅시에 필요함
mac address는 장치의 고유번호로서 통신시 상대방 컴퓨털르 찾아내기 위해 필요한 주소
따러서 인터넷에 접속하여 네트워크 통신을 할 때 상대방이 접속한 인터넷 망까지 ip address를 통해서 찾아가고, mac address를 통해 망에 접속된 장치 중 알맞는 장치에 도착 할 수 있음

# ARP(Adress Resolution Protocol)와 RARP
ARP는 OSI 계층의 네트워크 계층에서 사용되는 주소결정 프로토콜로서 ip주소에서 mac주소를 알아내기 위한 프로토콜이고
RARP는 반대로 mac주소에서 ip주소를 알아내기 위한 프로토콜

# 네트워크 장치
## 리피터
물리계층에서 단순히 전기적인 신호만 증폭시키는 장치
## 허브
리피터처럼 물리계층에서 전기적인 신호를 증폭시켜 전송거리를 연장시켜주는 장치
### 허브와 리피터의 차이
허브는 리피터에 몇 가지 기능이 추가된것.
패킷 모니터링과 멀티포트를 지원하여 문제가 생긴곳을 고립시킬 수 있음
## 브릿지
데이터링크계층에서 전송거리를 연장시켜주는 장치.
단순 전기적 신호를 증폭시키는 것이 아닌 프레임을 다시 만들어 전송
## 스위치
브릿지와 마찬가지로 전송거리를 연장시켜주는 장치
성능에 따라 L2 L3 L4 L7 스위치로 구분
L2스위치는 단순 mac 주소만 참조하여 처리하는 장치
### 브릿지와 스위치의 차이
데이터링크 계층에서 프레임을 전송하는 역할은 같으나 브릿지에 비해 속도나 기능이 업그레이드 된것이 스위치
### 스위치의 속도가 더 빠른 이유
데이터 처리 방식에 있어 서 브릿지는 소프트웨어적으로만 처리하는 반면 스위치는 하드웨어적으로 처리가 가능하여 속도가 빠름
## 라우터
네트워크 계층에서 ip주소를 이용해 목적지 포트로 패킷을 전송하는 장치
특히 서브넷이 다른 ip주소를 가진 장비간 통신은 라우터를 거쳐야함

# 게이트웨이(Gateway)
외부로 연결되는 통로를 의미하며, 로컬망 라우터와 외부 망 라우터간의 통로를 말함

# 프로토콜(Protocol)
컴퓨터간 데이터 통신을 원활하게 하기 위해 규정한 규약으로 신호의 송신순서(handshaking)나 데이터 표현법, 오류 검출법 등을 정한것
## http프로토콜
한 문서에서 다른 문서로 즉시 접근할 수 있는 텍스트를 하이퍼텍스트라고 하는데 이 텍스트를 전송하는 규약

# GET방식과 POST방식
http프로토콜을 이용하여 서버에 요청하는 방법 중 하나로서 요청방법에 따라 GET과 POST로 나뉨
## GET method
서버에 데이터를 요청하는 방식으로 특정 웹페이지 등을 요청할 때 쓰임
## POST method
서버에 데이터를 요청하는 방식으로 웹페이지의 폼에 입력한 데이터를 서버에 보낼때 쓰임
데이터는 http의 body에 담아 보냄. get처럼 url에 보이지 않아 안정적이라고 말할 수 있으나 암호화 되어있지는 않음
## 안정성 취약 해결방법
SSL을 이용한 HTTPS프로토콜로 데이터 전송을 암호화하여 보냄

# restful API에서의 URL과 일반적인 HTTP에서의 URL차이
http의 URL은 기능에 중점을 두어 설계, restful API에서의 URL은 자원에 중점을 두고 설계

# HTTPS
표현계층의 SSL프로토콜 위에서 응용계층의 HTTP프로토콜이 실행되는 것을 말하며 HTTP over SSL
## HTTPS 동작방식
응용계층에서 HTTP프로토콜에 따라 메세지에 데이터를 담아 표현계층으로 보냄
표현계층의 SSL에 따라 메세지를 클라이언트와 주고 받은 대칭키로 암호화하여 전송계층에 보냄
전송계층에서는 TCP프로토콜에 따라 세그먼트에 메세지를 올려 클라이언트에 보냄
클라이언트는 서버에서 가공한 과정의 역순으로 진행되며 표현계층에서는 서버와 주고받은 대칭키로 복호화하여 데이터를 열어볼 수 있음

# SSL
OSI 7계층중 표현계층에 속하는 보안 프로토콜로서 스니핑과 같은 악의적인 행위를 방지하기 위해 만들어진 프로토콜
HTTPS는 SSL프로토콜 위에서 동작하는 프로토콜이다.
## SSL 디지털 인증서
SSL인증서는 클라이언트와 서버간의 통신을 제 3자가 보증해주는 전자화된 문서
클라이언트가 서버에 접속한 직후에 서버는 클라이언트에게 인증서 정보를 전달
클라이언트는 이 인증서 정보가 신뢰할 수 있는 것인지 검증 한 후에 다음 절차 수행
SSL인증서에는 서비스의 정보(인증서를 발급한 기관), 서버측의 공개키가 포함
## 대칭키
동일한 키로 암호화와 복호화를 같이 할 수 있는 방식의 암호화기법
단점 : 대칭키가 유출되면 암호의 내용을 복호화 할 수 있음
## 공개키
두개의 키로 암호화, 복호화 수행(A키로 암호화하면 B키로 복호화, B키로 암호화하면 A키로 복호화)
두개의 키중 하나를 비공개키(private key, 개인키, 비밀키)
나머지 하나를 공개키(public key)로 지정
비공개키는 자신만 갖고 있고 공개키는 타인에게 제공
공개키를 제공받은 타인은 공개키를 이용하여 정보를 암호화
암호화한 정보를 비공개키를 가지고 있는 사람에게 전송
비공개키 소유자는 이 키를 이용하여 암호화된 정보를 복호화
이 과정에서 공개키가 유출된다고 해도 비공개키를 모르면 정보를 복호화할 수 없기 때문에 안전
## SSL 사용
SSL은 공개키와 대칭키의 장점을 혼합한 방법을 사용
속도 문제로 인해 단순한 웹서핑때는 HTTPS를 사용하지 않고 로그인이나 결제와 같은 페이지에서 주로 사용
HTTP는 TCP 80번포트를 사용
SSL이 적용된 HTTPS는 TCP 443번 포트를 사용

# TCP와 UDP
전송계층에서 사용되는 프로토콜. 사용되는 환경에 따라 TCP와 UDP로 나뉨
## UDP
주고받는 통신보다 데이터를 일방적으로 보내는 것을 중요시
따라서 데이터의 신뢰성을 보장하지 않지만 가볍고 단순한 구조이고 속도가 빨라 실시간 통신가능.
주로 p2p나 스트리밍, 전화에 사용
## TCP
흐름 중심 프로토콜로서 서로가 통신을 주고 받는 것을 중요시
따라서 데이터 전송의 안전을 신경쓰기 때문에 중간에 패킷이 손실되는 경우 재전송을 통해(SYN-ACK handshaking) 신뢰성을 보장할 수 있음
느림. 거의 대부분의 통신에서 사용. 
특히 파일이나 데이터 전송시에 사용
## TCP 신뢰성 보장
3-way handshaking과 혼잡제어 흐름제어를 통해 신뢰성을 보장

# 흐름제어(flow control)
TCP가 신뢰성 보장을 위해 사용하는 메커니즘 중 하나로서 송신측과 수신측의 속도 차이를 해결하기 위해 사용하는 메커니즘
대표적으로 stop and wait ARQ, sliding window기법이 있음
## stop and wait ARQ
수신측으로 부터 ACK를 받을때까지 대기 하다가 전송하는 기법
## sliding window
## window
## Go-Back-N ARQ
오류가 난 지점부터 전송한 지점까지 모두 재전송 하는 기법
## Selective repeat ARQ
오류가 난 부분만 재전송 하는 기법
## adaptive ARQ 
데이터 블록의 길이를 채널상태에 따라 동적으로 변경하는 방식, 전송효율이 제일 좋음

# 혼잡제어(congestion control)
역시 신뢰성을 보장하기 위해 사용되는 메커니즘 중 하나로 네트워크의 혼잡을 피하기 위해 송신자의 전송속도를 줄이기 위해 사용하는 메커니즘
대표적으로 AIMD, Slow start, fast retransmit, fast recovery 기법이 있음

# IPv4 IPv6
## IPv4
unicast, multicast, broadcast
## IPv6
unicast, multicast, anycast

# 프로토콜
- RIP : 거리벡터 방식을 채용하고 있는 대표적인 내부 라우팅 프로토콜
- ICMP : 오류보고와 오류 수정기능, 호스트와 관리 질의를 위한 메커니즘이 없는 IP 프로토콜을 보완하기 위해 설계됨
IP와 조합하여 통신중에 발생하는 오류의 처리와 전송 경로 변경 등을 위한 제어 메세지를 관리하는 역할을 함
- ARP : 호스트의 IP주소(논리주소)를 호스트와 연결된 네트워크 접속장치의 물리적 주소(MAC Address)로 변환함
- HTTP : HTTP는 클라이언트와 서버 사이에 이루어지는 요청/응답(request/response) 프로토콜이다.

# java에서 TCP와 UDP 소켓 생성방법

# TCP와 UDP 패킷 구조의 차이

# 브라우저에 URL을 치면 어떤 과정을 거쳐서 어떤 일이 발생하는지 네트워크 통신의 전반적인 흐름 설명

# 서브넷 마스크를 사용하여 A,B,C,D class 쪼개는 법
